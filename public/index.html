<!doctype html><html lang="en"><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Simple Messaging App</title><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;700&display=swap" rel="stylesheet"><style>:root{--background-color:#121212;--surface-color:#1E1E1E;--on-background-color:#FFFFFF;--on-surface-color:#FFFFFF;--border-color:#2c2c2c}body{font-family:'IBM Plex Sans',sans-serif;background-color:var(--background-color);color:var(--on-background-color);margin:0;min-height:100vh;position:relative;overflow-x:hidden}body::before{content:'';position:fixed;top:-50%;left:-50%;width:200%;height:200%;background-image:linear-gradient(0deg,#121212 0,#181818 50%,#1a1a1a 100%);animation:10s linear infinite gradientRotate;z-index:-1}@keyframes gradientRotate{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.tb{background-color:var(--surface-color);padding:10px 20px;font-size:1.5em;font-weight:500;border-bottom:1px solid var(--border-color);text-align:center;box-shadow:0 2px 10px rgba(255,255,255,.03)}.ct{width:90%;max-width:900px;margin:20px auto;display:flex;flex-direction:column;overflow:hidden}#mg{border:1px solid var(--border-color);padding:15px;height:60vh;overflow-y:auto;background-color:var(--surface-color);margin-bottom:20px;border-radius:8px;white-space:pre-wrap;box-shadow:0 4px 15px rgba(255,255,255,.05)}.mc{display:flex;align-items:center;padding:2px 0;gap:8px}.mt{color:#555;font-size:.9em}.mn{font-weight:700;color:#777}.mx{color:#fff}.db{background:#555;color:#fff;border:none;padding:2px 8px;border-radius:4px;cursor:pointer;margin-left:10px}.db:hover{background:#777}#mf{display:flex;gap:10px}#mf input{flex-grow:1;padding:10px;border:1px solid var(--border-color);border-radius:5px;background-color:var(--surface-color);color:var(--on-surface-color);font-size:1em;outline:0;transition:border-color .3s,box-shadow .3s;box-shadow:0 2px 5px rgba(0,0,0,.2)}#mf input:focus{border-color:#666;box-shadow:0 0 0 2px rgba(255,255,255,.1)}#mf input::placeholder{color:#888}#mf input#nk{flex-grow:0;width:150px}#mf button{padding:10px 20px;border:1px solid var(--border-color);border-radius:5px;background-color:#333;color:var(--on-surface-color);font-size:1em;cursor:pointer;transition:background-color .3s}#mf button:hover{background-color:#444}.fab{position:fixed;bottom:20px;right:20px;width:56px;height:56px;border-radius:50%;background-color:var(--surface-color);border:1px solid var(--border-color);box-shadow:0 4px 15px rgba(0,0,0,.2);display:flex;justify-content:center;align-items:center;cursor:pointer;transition:background-color .3s}.fab:hover{background-color:#444}</style><div class="tb">onion.23.net.pl</div><div class="ct"><div id="mg"></div><form id="mf"><input id="nk" name="nick" required placeholder="Nickname"> <input id="ms" name="message" required placeholder="Type your message..."> <button type="submit">Send</button></form></div><div class="fab" id="sound-toggle"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg></div><script>let e,t,n=!0;async function o(){if(!e)try{e=new(window.AudioContext||window.webkitAudioContext);var n=await(await fetch("notification.mp3")).arrayBuffer();t=await e.decodeAudioData(n),document.removeEventListener("click",o),document.removeEventListener("keydown",o)}catch(e){}}document.addEventListener("click",o,{once:!0}),document.addEventListener("keydown",o,{once:!0}),document.getElementById("sound-toggle").addEventListener("click",()=>{n=!n,document.querySelector("#sound-toggle svg").innerHTML=n?'\n                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>\n                <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>\n            ':'\n                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>\n                <line x1="23" y1="1" x2="1" y2="23"></line>\n            '});let a=new WebSocket("ws://"+window.location.host);function c(t){if(!t)return null;let e=new URLSearchParams(window.location.search).has("adminkey"),n=document.createElement("div");n.className="mc",n.id="m-"+t.id;var a=document.createElement("span"),a=(a.textContent=new Date(t.timestamp).toISOString(),a.className="mt",n.appendChild(a),n.appendChild(document.createTextNode(" ")),document.createElement("span")),a=(a.textContent=t.nickname,a.className="mn",n.appendChild(a),n.appendChild(document.createTextNode(" ")),document.createElement("span"));if(a.textContent=t.message,a.className="mx",n.appendChild(a),e){let e=document.createElement("button");e.textContent="Delete",e.className="db",e.onclick=()=>s(t.id),n.appendChild(e)}return n}async function d(){let e=await fetch("/messages"),t=await e.json(),n=document.getElementById("mg");n.innerHTML="",t.forEach(e=>{e=c(e);e&&n.appendChild(e)}),n.scrollTop=n.scrollHeight}async function s(e){var t=new URLSearchParams(window.location.search).get("adminkey");t&&await fetch("/delete-message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messageId:e,adminkey:t})})}a.onmessage=function(a){a=JSON.parse(a.data);if("delete"===a.type){let e=document.getElementById("m-"+a.id);void(e&&e.remove())}else{var o=document.getElementById("mg"),a=c(a);if(a&&(o.appendChild(a),o.scrollTop=o.scrollHeight,n)&&e&&t){let n=e.createBufferSource();n.buffer=t,n.connect(e.destination),n.start(0)}}},d();let i=localStorage.getItem("chat_nick");i&&(document.getElementById("nk").value=i),document.getElementById("mf").onsubmit=async function(e){e.preventDefault();var e=document.getElementById("nk"),t=(localStorage.setItem("chat_nick",e.value),document.getElementById("ms"));(await fetch("/send-message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nick:e.value,message:t.value})})).ok?t.value="":alert("Error sending message.")}</script>
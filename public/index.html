<!doctype html><html lang="en"><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>23net | Secure Public Chat</title><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="icon" type="image/x-icon" href="favicon.ico"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;700&display=swap" rel="stylesheet"><style>:root{--background-color:#121212;--surface-color:#1E1E1E;--on-background-color:#FFFFFF;--on-surface-color:#FFFFFF;--border-color:#2c2c2c}body{font-family:'IBM Plex Sans',sans-serif;background-color:var(--background-color);color:var(--on-background-color);margin:0;min-height:100vh;position:relative;overflow-x:hidden}body::before{content:'';position:fixed;top:-50%;left:-50%;width:200%;height:200%;background-image:linear-gradient(0deg,#121212 0,#181818 50%,#1a1a1a 100%);animation:60s ease-in-out infinite gradientRotate;z-index:-1}@keyframes gradientRotate{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.tb{background-color:var(--surface-color);padding:10px 20px;font-size:1.5em;font-weight:500;border-bottom:1px solid var(--border-color);text-align:center;box-shadow:0 2px 10px rgba(255,255,255,.03)}.ct{width:90%;max-width:900px;margin:20px auto;display:flex;flex-direction:column;overflow:hidden}#mg{border:1px solid var(--border-color);padding:15px;height:60vh;overflow-y:auto;background-color:var(--surface-color);margin-bottom:20px;border-radius:8px;white-space:pre-wrap;box-shadow:0 4px 15px rgba(255,255,255,.05)}.mc{display:flex;align-items:center;padding:2px 0;gap:8px;flex-wrap:wrap}.mt{color:#555;font-size:.9em}.mn{font-weight:700;color:#777}.mx{color:#fff}.db{background:#555;color:#fff;border:none;padding:2px 8px;border-radius:4px;cursor:pointer;margin-left:10px}.db:hover{background:#777}#mf{display:flex;gap:10px}#mf input{flex-grow:1;padding:10px;border:1px solid var(--border-color);border-radius:5px;background-color:var(--surface-color);color:var(--on-surface-color);font-size:1em;outline:0;transition:border-color .3s,box-shadow .3s;box-shadow:0 2px 5px rgba(0,0,0,.2)}#mf input:focus{border-color:#666;box-shadow:0 0 0 2px rgba(255,255,255,.1)}#mf input::placeholder{color:#888}#mf input#nk{flex-grow:0;width:150px}#mf button{padding:10px 20px;border:1px solid var(--border-color);border-radius:5px;background-color:#333;color:var(--on-surface-color);font-size:1em;cursor:pointer;transition:background-color .3s}#mf button:hover{background-color:#444}@media (max-width:600px){#mf{flex-direction:column}#mf input#nk{width:100%;box-sizing:border-box}}.fab{position:fixed;bottom:20px;right:20px;width:56px;height:56px;border-radius:50%;background-color:var(--surface-color);border:1px solid var(--border-color);box-shadow:0 4px 15px rgba(0,0,0,.2);display:flex;justify-content:center;align-items:center;cursor:pointer;transition:background-color .3s}.fab:hover{background-color:#444}.date-separator{width:100%;text-align:center;border-bottom:1px solid var(--border-color);line-height:.1em;margin:20px 0;color:#888}.date-separator span{background-color:var(--surface-color);padding:0 10px}</style><div class="tb">onion.23.net.pl</div><div class="ct"><div id="mg"></div><form id="mf"><input id="nk" name="nick" required placeholder="Nickname"> <input id="ms" name="message" required placeholder="Type your message..."> <button type="submit">Send</button></form></div><div class="fab" id="sound-toggle"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg></div><script>let e,t,n=!0;async function a(){if(!e)try{e=new(window.AudioContext||window.webkitAudioContext);const n=await fetch("notification.mp3"),o=await n.arrayBuffer();t=await e.decodeAudioData(o),document.removeEventListener("click",a),document.removeEventListener("keydown",a)}catch(e){}}document.addEventListener("click",a,{once:!0}),document.addEventListener("keydown",a,{once:!0}),document.getElementById("sound-toggle").addEventListener("click",()=>{n=!n;document.querySelector("#sound-toggle svg").innerHTML=n?'\n                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>\n                <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>\n            ':'\n                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>\n                <line x1="23" y1="1" x2="1" y2="23"></line>\n            '});const o=new WebSocket(`ws://${window.location.host}`);function c(e){if(!e)return null;const t=new URLSearchParams(window.location.search).has("adminkey"),n=document.createElement("div");n.className="mc",n.id=`m-${e.id}`,n.dataset.timestamp=new Date(e.timestamp).getTime();const a=document.createElement("span");a.textContent=new Date(e.timestamp).toLocaleTimeString(),a.className="mt",n.appendChild(a),n.appendChild(document.createTextNode(" "));const o=document.createElement("span");o.textContent=e.nickname,o.className="mn",n.appendChild(o),n.appendChild(document.createTextNode(" "));const c=document.createElement("span");if(c.textContent=e.message,c.className="mx",n.appendChild(c),t){const t=document.createElement("button");t.textContent="Delete",t.className="db",t.onclick=()=>d(e.id),n.appendChild(t)}return n}async function s(){const e=await fetch("/messages"),t=await e.json(),n=document.getElementById("mg");n.innerHTML="";let a=null;t.forEach(e=>{const t=new Date(e.timestamp).toDateString();if(t!==a){const e=i(t);n.appendChild(e),a=t}const o=c(e);o&&n.appendChild(o)}),n.scrollTop=n.scrollHeight}function i(e){const t=document.createElement("div");t.className="date-separator";const n=document.createElement("span");return n.textContent=e,t.appendChild(n),t}async function d(e){const t=new URLSearchParams(window.location.search).get("adminkey");t&&await fetch("/delete-message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messageId:e,adminkey:t})})}o.onmessage=function(a){const o=JSON.parse(a.data);if("delete"===o.type){const e=document.getElementById(`m-${o.id}`);if(e){const t=e.previousElementSibling,n=e.nextElementSibling;e.remove(),t&&t.classList.contains("date-separator")&&(n&&!n.classList.contains("date-separator")||t.remove())}return}const s=document.getElementById("mg"),d=s.querySelector(".mc:last-child"),m=d?new Date(parseInt(d.dataset.timestamp)).toDateString():null,l=new Date(o.timestamp).toDateString();if(l!==m){const e=i(l);s.appendChild(e)}const r=c(o);if(r&&(s.appendChild(r),s.scrollTop=s.scrollHeight,n&&e&&t)){const n=e.createBufferSource();n.buffer=t,n.connect(e.destination),n.start(0)}},s();const m=localStorage.getItem("chat_nick");m&&(document.getElementById("nk").value=m),document.getElementById("mf").onsubmit=async function(e){e.preventDefault();const t=document.getElementById("nk");localStorage.setItem("chat_nick",t.value);const n=document.getElementById("ms");(await fetch("/send-message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nick:t.value,message:n.value})})).ok?n.value="":alert("Error sending message.")}</script>